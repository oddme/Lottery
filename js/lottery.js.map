{"version":3,"sources":["../src/lottery.js"],"names":["Lottery","arr","round","dom","_items","_nowNum","_round","_dom","className","highLightItem","document","getElementsByName","removeAttribute","toString","removeHighLight","nowItem","setAttribute","ste","num","self","i","setInterval","step","clearInterval","deep","j","Math","random","runStep","div","createElement","innerHTML","appendChild","createLottery","start","addEventListener","btnRun","alert","app","getElementById","lottery"],"mappings":"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","file":"lottery.js","sourcesContent":["/**\r\n * Created by admin on 2017/7/25.\r\n */\r\n\r\nclass Lottery {\r\n    _items = [];\r\n    _nowNum = 1;\r\n    _round = 3;\r\n    _dom = null;\r\n\r\n    constructor(arr, round, dom) {\r\n        this._items = arr;\r\n        this._nowNum = 1;\r\n        this._round = round;\r\n        this._dom = dom;\r\n    }\r\n\r\n    removeHighLight(className) {\r\n        if (className === 1) {\r\n            let highLightItem = document.getElementsByName('8')[0];\r\n            highLightItem.removeAttribute('class');\r\n        } else {\r\n            let highLightItem = document.getElementsByName((className - 1).toString())[0];\r\n            highLightItem.removeAttribute('class');\r\n        }\r\n    }\r\n\r\n    step(){\r\n        if (this._nowNum > 7) {\r\n            this._nowNum = 1;\r\n            this.removeHighLight(this._nowNum);\r\n            let nowItem = document.getElementsByName(this._nowNum.toString())[0];\r\n            nowItem.setAttribute('class', 'mask');\r\n        } else {\r\n            this._nowNum++;\r\n            this.removeHighLight(this._nowNum);\r\n            let nowItem = document.getElementsByName(this._nowNum.toString())[0];\r\n            nowItem.setAttribute('class', 'mask');\r\n        }\r\n    }\r\n\r\n    runStep(ste) {\r\n        let num = 1;\r\n        let self = this;\r\n        let i = setInterval(function () {\r\n            self.step();\r\n            num++;\r\n            if(num > self._round*8){\r\n                clearInterval(i);\r\n                num = 1;\r\n                let deep = self;\r\n                let j = setInterval(function () {\r\n                    if(num > ste + 8){\r\n                        clearInterval(j);\r\n                    } else {\r\n                        deep.step();\r\n                        num++;\r\n                    }\r\n                }, 500);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n\r\n    btnRun(){\r\n        let ste = Math.random() * 8 + 1;\r\n        this.runStep(ste);\r\n    }\r\n\r\n    createLottery() {\r\n        let div = document.createElement(div);\r\n        div.setAttribute(\"id\", 'lottery');\r\n        div.innerHTML = '<div class=\"row\"><div class=\"box\"><img src=\"' + this._items[1]['url'] + '\"><div class=\"mask\" name=\"1\"></div></div>'\r\n            + '<div class=\"box\"><img src=\"' + this._items[2]['url'] + '\"><div name=\"2\"></div></div>'\r\n            + '<div class=\"box\"><img src=\"' + this._items[3]['url'] + '\"><div name=\"3\"></div></div><div class=\"clear\"></div></div>'\r\n            + '<div class=\"row\"><div class=\"box\"><img src=\"' + this._items[4]['url'] + '\"><div name=\"8\"></div></div>'\r\n            + '<div name=\"start-btn\" class=\"box\"><img src=\"' + this._items[0]['url'] + '\"></div>'\r\n            + '<div class=\"box\"><img src=\"' + this._items[5]['url'] + '\"><div name=\"4\"></div></div><div class=\"clear\"></div></div>'\r\n            + '<div class=\"row\"><div class=\"box\"><img src=\"' + this._items[6]['url'] + '\"><div name=\"7\"></div></div>'\r\n            + '<div class=\"box\"><img src=\"' + this._items[7]['url'] + '\"><div name=\"6\"></div></div>'\r\n            + '<div class=\"box\"><img src=\"' + this._items[8]['url'] + '\"><div name=\"5\"></div></div><div class=\"clear\"></div></div>';\r\n        this._dom.appendChild(div);\r\n    }\r\n\r\n    start() {\r\n        this.createLottery();\r\n        let start = document.getElementsByName('start-btn')[0];\r\n        start.addEventListener('click', () => {\r\n            this.btnRun();\r\n        });\r\n    }\r\n\r\n    stop() {\r\n        alert(this._items[this._nowNum]['text']);\r\n    }\r\n}\r\n\r\nlet app = document.getElementById('app');\r\nlet lottery = new Lottery([{'url': 'images/btn.png', 'text': '开始按钮'},\r\n    {'url': 'images/01.png', 'text': '恭喜你抽中1元现金红包'},\r\n    {'url': 'images/02.png', 'text': '恭喜你抽中2元现金红包'},\r\n    {'url': 'images/03.png', 'text': '恭喜你抽中3元现金红包'},\r\n    {'url': 'images/04.png', 'text': '恭喜你抽中4元现金红包'},\r\n    {'url': 'images/05.png', 'text': '恭喜你抽中5元现金红包'},\r\n    {'url': 'images/06.png', 'text': '恭喜你抽中6元现金红包'},\r\n    {'url': 'images/07.png', 'text': '恭喜你抽中7元现金红包'},\r\n    {'url': 'images/08.png', 'text': '恭喜你抽中8元现金红包'}], 3, app);\r\n\r\nlottery.start();\r\n\r\n"]}